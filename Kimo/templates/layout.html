<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {% block head %}
    <title>{{ config.title }}</title>
  {% endblock %}

  <!-- GitHub markdown CSS & Google Font（先加载第三方） -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/github-markdown-css/github-markdown.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 你的 loading css / favicon -->
  <link rel="stylesheet" href="/static/css/loading.css">
  <link rel="icon" href="{{ config.avatar }}" type="image/x-icon">

  <!-- 自定义样式（放在 Tailwind 之后，确保覆盖） -->
  <style>
    /* 基准：确保 1rem = 16px（方便控制 prose 等基于 rem 的字号）*/
    html { font-size: 16px; }

    /* 全站字体优先使用 Noto Serif SC（回退到 SimSun/宋体） */
    html, body {
      font-family: "Noto Serif SC", "SimSun", "宋体", serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      color: #1f2937;
    }

    /* 针对 markdown / 文章体的更具体覆盖（如果被 Tailwind 覆盖，就临时用 !important 验证） */
    .markdown-body, .article-body {
      font-family: "Noto Serif SC", "SimSun", "宋体", serif !important;
      font-size: 16px !important;          /* 正文字号：16px，可按需改为 18px */
      line-height: 1.9;
    }

    /* 如果页面使用 Tailwind prose，prose 的字号是基于 rem 的，你也可以调整这里 */
    .prose {
      /* 让 prose 的默认字号等同于 1rem（即 16px）*/
      font-size: 1rem;
    }

    /* 保持你原来的图片/代码样式 */
    .markdown-body img {
      cursor: zoom-in;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .markdown-body img:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 24px rgba(16,24,40,0.08);
    }

    .prose pre { border-radius: 1rem; overflow: auto; }
    .prose img { border-radius: 1rem; }

    :root { --card-radius: 1rem; --max-article-width: 72ch; }
    .bg-white.rounded-3xl { border-radius: var(--card-radius); }
  </style>

</head>

<body class="bg-gray-100 text-gray-800">

<!-- ===== Loading ===== -->
<div id="global-loading"
     class="fixed inset-0 z-[9999] flex items-center justify-center bg-white">
  <div class="w-8 h-8 border-4 border-gray-300 border-t-gray-700 rounded-full animate-spin"></div>
</div>

<!-- ===== 背景图 ===== -->
<div
  id="bg-image"
  class="fixed inset-0 -z-20
         bg-[url('https://api.1314.cool/bingimg')]
         bg-cover bg-center blur-up">
</div>

<!-- ===== 背景遮罩（桌面模糊 / 移动纯色） ===== -->
<div class="fixed inset-0 -z-10 bg-white/70 backdrop-blur no-mobile-blur"></div>

{% block header %}
  {% include "components/header.html" %}
{% endblock %}

<main class="{% if not article %}max-w-6xl{% else %}max-w-7xl{% endif %} mx-auto px-4 my-10">

  <!-- List Header -->
  {% if pageId == 1 %}
  <div class="mb-6">
    <div class="ml-1 flex items-center justify-between">
      <h2 class="text-xl font-medium text-gray-800">最近文章</h2>
      {% if total_pages >= 2 %}
        <a href="?page=2" class="text-xl font-medium text-gray-800 ...">更多文章 →</a>
      {% endif %}
    </div>
  </div>
  {% endif %}

  <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
    {% block content %}{% endblock %}

    <div class="col-span-1 space-y-6">
      <!-- 侧栏内容保持不变 -->
      <div class="bg-white/80 backdrop-blur {% if editor %}hidden{% endif %} rounded-3xl shadow-sm p-6">
        <!-- Avatar / Info -->
        <div class="flex flex-col items-center text-center space-y-4">
          <div class="relative w-24 h-24 rounded-full overflow-hidden ring-2 ring-gray-200 hover:ring-black transition">
            <img src="{{ config.avatar }}" alt="Avatar" class="w-full h-full object-cover" />
          </div>
          <div>
            <h2 class="text-lg font-semibold text-gray-900">{{ config.personName }}</h2>
            <p class="text-sm text-gray-500 mt-1">{{ config.introduction }}</p>
          </div>
          <p class="text-sm text-gray-600 leading-relaxed">{{ config.bio }}</p>
          <div class="flex items-center gap-4 pt-2">
            <a href="{{ config.github }}" target="_blank" class="text-gray-500 hover:text-black transition" aria-label="GitHub">
              <!-- SVG... -->
            </a>
          </div>
        </div>
      </div>

      {% block footer %}
      <!-- 页脚侧栏项保持 -->
      <div class="bg-white/80 backdrop-blur rounded-3xl shadow-sm p-4">
        <h3 class="font-semibold ml-2 mt-2 mb-3">Pages</h3>
        {% if pageList %}
          {% for page in pageList %}
            <a {% if not page.type =='link' %}href=" /{{ page.name }}"{% else %}href="{{ page.content }}"{% endif %}
               class="group mt-4 flex items-center rounded-2xl border border-gray-200 bg-white p-4 transition hover:-translate-y-1 hover:shadow-sm hover:border-gray-300 active:scale-[0.98]">
              <div class="h-10 w-10 flex items-center justify-center rounded-2xl bg-blue-50 text-gary-600 text-sm font-semibold">#</div>
              <div class="flex-1 min-w-0">
                <h3 class="ml-2 text-base font-medium text-gray-800 truncate">{{ page.name }}</h3>
              </div>
            </a>
          {% endfor %}
        {% else %}
          <span class="ml-2 text-gray-400 text-sm">暂无Page</span>
        {% endif %}
      </div>
      {% endblock %}
    </div>
  </div>
</main>

{% block other %}{% endblock %}

<!-- ===== JS ===== -->
<script src="/static/js/loading.js"></script>
{% block script %}{% endblock %}

</body>
</html>
